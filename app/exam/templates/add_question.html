{% extends "base.html" %}
{% block title %}Add Question{% endblock %}

{% block main_content %}
<div class="card-container">
  <div class="card-custom">

    <h2>Add Question</h2>

    <form method="POST">

      <!-- Question Type -->
      <label>Question Type</label>
      <select name="question_type" id="question_type" class="form-control mb-3" required>
        <option value="">Choose Type</option>
        <option value="mcq">Multiple Choice</option>
        <option value="true_false">True/False</option>
        <option value="short">Short Answer</option>
        <option value="numerical">Numerical</option>
        <option value="essay">Essay</option>
      </select>

      <!-- Question Text -->
      <label>Question Text</label>
      <input type="text" name="question_text" class="form-control mb-3" required>

      <!-- MCQ -->
      <div id="mcq_block" style="display:none;">
        <h5>Options <small class="text-muted">(Select the correct answer)</small></h5>
        {% for i in range(1,5) %}
        <div class="form-check mb-2">
          <input type="radio"
                 name="mcq_correct"
                 value="{{ i }}"
                 class="form-check-input">
          <input type="text"
                 name="opt{{ i }}"
                 class="form-control mt-1"
                 placeholder="Option {{ i }}">
        </div>
        {% endfor %}
      </div>

      <!-- True/False -->
      <div id="tf_block" style="display:none;">
        <h5>Correct Answer</h5>
        <div class="form-check">
          <input type="radio" name="tf_answer" value="true" required> True
        </div>
        <div class="form-check">
          <input type="radio" name="tf_answer" value="false"> False
        </div>
      </div>

      <!-- Text Answers -->
      <div id="text_block" style="display:none;">
        <h5>Expected Answer</h5>
        <input type="text" name="text_answer" class="form-control mb-2">
      </div>

      <button class="btn btn-primary mt-3">Add Question</button>

    </form>
  </div>
</div>

<script>
const typeSelect = document.getElementById("question_type");
const mcq = document.getElementById("mcq_block");
const tf = document.getElementById("tf_block");
const text = document.getElementById("text_block");

typeSelect.addEventListener("change", () => {
  mcq.style.display = typeSelect.value === "mcq" ? "block" : "none";
  tf.style.display = typeSelect.value === "true_false" ? "block" : "none";
  text.style.display = ["short","numerical","essay"].includes(typeSelect.value)
                       ? "block" : "none";
});
</script>

{% endblock %}
